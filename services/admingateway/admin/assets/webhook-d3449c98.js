import{A as g,d as i,r as j,c as n,a as e,j as _,v as b,u as a,F as p,b as h,i as x,o as l,t as v,g as w}from"./index-fb0c9453.js";const y={class:"mb-4 app-base jg-cb-box"},E={class:"row jg-cb-row jg-cb-header"},C={class:"jg-cb-form"},V={class:"col-sm-7"},B={class:"row jg-cb-row jg-cb-body"},H={class:"jg-cb-group"},A={class:"jg-cb-group-title"},D={class:"jg-cb-group-content"},F={class:"jg-form-check form-switch"},N={class:"form-check-label"},R=["checked","id"],q={__name:"webhook",setup(S){let m=x(),{currentRoute:{_rawValue:{params:{app_key:u}}}}=m;const f=w();g.getEventHook({app_key:u}).then(({data:c={}})=>{let{event_sub_config:t,event_sub_switch:s}=c;i.extend(o,{config:t,hooks:s})});let o=j({hooks:[],config:{}});function k(c){i.forEach(o.hooks,t=>{i.forEach(t.items,s=>{i.isEqual(s.key,c.target.id)&&(s.value=Number(c.target.checked))})}),d()}function d(){let{config:c,hooks:t}=o;g.setEventHook({app_key:u,config:c,hooks:t}).then(()=>{f.proxy.$toast({icon:"success",text:"保存成功"})})}return(c,t)=>(l(),n("div",y,[e("div",E,[e("div",C,[t[2]||(t[2]=e("label",{class:"col-sm-1 col-form-label"},[e("div",{class:"jg-cb-input-item"},"设置事件地址"),e("div",{class:"jg-cb-input-item"},"设置鉴权凭证")],-1)),e("div",V,[_(e("input",{class:"form-control jg-cb-input-item",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>a(o).config.event_sub_url=s),placeholder:"请输入事件地址"},null,512),[[b,a(o).config.event_sub_url]]),_(e("input",{class:"form-control jg-cb-input-item",type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>a(o).config.event_sub_auth=s),placeholder:"请输入鉴权凭证，凭证会与事件一起回调给业务服务器"},null,512),[[b,a(o).config.event_sub_auth]])]),e("div",{class:"col-sm-3 jg-cb-btns"},[e("div",{class:"jg-button jg-button-bg",onClick:d},"保存")])])]),e("div",B,[(l(!0),n(p,null,h(a(o).hooks,s=>(l(),n("div",H,[e("div",A,v(s.name),1),e("div",D,[(l(!0),n(p,null,h(s.items,r=>(l(),n("div",F,[e("label",N,v(r.name),1),e("input",{class:"form-check-input",type:"checkbox",checked:r.value,id:r.key,onChange:k},null,40,R)]))),256))])]))),256))])]))}};export{q as default};
