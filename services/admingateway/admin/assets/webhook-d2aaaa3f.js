import{A as _,d as i,r as j,c as n,a as e,j as g,v as b,u as a,F as h,b as p,i as x,o as l,t as v,g as w}from"./index-0818f5f9.js";const y={class:"mb-4 app-base jg-cb-box"},E={class:"row jg-cb-row jg-cb-header"},C={class:"jg-cb-form"},V=e("label",{class:"col-sm-1 col-form-label"},[e("div",{class:"jg-cb-input-item"},"设置事件地址"),e("div",{class:"jg-cb-input-item"},"设置鉴权凭证")],-1),B={class:"col-sm-7"},H={class:"row jg-cb-row jg-cb-body"},A={class:"jg-cb-group"},D={class:"jg-cb-group-title"},F={class:"jg-cb-group-content"},N={class:"jg-form-check form-switch"},R={class:"form-check-label"},S=["checked","id"],I={__name:"webhook",setup(U){let m=x(),{currentRoute:{_rawValue:{params:{app_key:u}}}}=m;const f=w();_.getEventHook({app_key:u}).then(({data:c={}})=>{let{event_sub_config:s,event_sub_switch:t}=c;i.extend(o,{config:s,hooks:t})});let o=j({hooks:[],config:{}});function k(c){i.forEach(o.hooks,s=>{i.forEach(s.items,t=>{i.isEqual(t.key,c.target.id)&&(t.value=Number(c.target.checked))})}),d()}function d(){let{config:c,hooks:s}=o;_.setEventHook({app_key:u,config:c,hooks:s}).then(()=>{f.proxy.$toast({icon:"success",text:"保存成功"})})}return(c,s)=>(l(),n("div",y,[e("div",E,[e("div",C,[V,e("div",B,[g(e("input",{class:"form-control jg-cb-input-item",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>a(o).config.event_sub_url=t),placeholder:"请输入事件地址"},null,512),[[b,a(o).config.event_sub_url]]),g(e("input",{class:"form-control jg-cb-input-item",type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>a(o).config.event_sub_auth=t),placeholder:"请输入鉴权凭证，凭证会与事件一起回调给业务服务器"},null,512),[[b,a(o).config.event_sub_auth]])]),e("div",{class:"col-sm-3 jg-cb-btns"},[e("div",{class:"jg-button jg-button-bg",onClick:d},"保存")])])]),e("div",H,[(l(!0),n(h,null,p(a(o).hooks,t=>(l(),n("div",A,[e("div",D,v(t.name),1),e("div",F,[(l(!0),n(h,null,p(t.items,r=>(l(),n("div",N,[e("label",R,v(r.name),1),e("input",{class:"form-check-input",type:"checkbox",checked:r.value,id:r.key,onChange:k},null,40,S)]))),256))])]))),256))])]))}};export{I as default};
