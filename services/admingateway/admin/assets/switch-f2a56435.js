import{r as b,s as E,d as i,o,c as u,a as c,t as k,j as N,v as V,u as t,x as B,F as g,b as y,i as U,A as S,p as C,y as $,z as x,k as j,g as F}from"./index-0818f5f9.js";const I={class:"jg-sw-form"},z={class:"jg-form-check form-switch"},A={class:"form-check-label"},D={__name:"input",props:["item"],emits:["save"],setup(h,{emit:d}){const e=h,p=d;let s=b({value:Number(e.item.value)});function l(){let{id:a}=e.item,{value:n}=s;p("save",{id:a,value:n})}return E(()=>e.item.value,a=>{i.extend(s,{value:Number(a)})}),(a,n)=>(o(),u("div",I,[c("div",z,[c("label",A,k(e.item.name),1),N(c("input",{class:"form-control",type:"number","onUpdate:modelValue":n[0]||(n[0]=m=>t(s).value=m)},null,512),[[V,t(s).value]]),c("div",{class:"jg-button",onClick:l},"保存")])]))}},L={class:"jg-sw-form"},M={class:"jg-form-check form-switch"},P={class:"form-check-label"},R=["checked"],H={__name:"switch",props:["item"],emits:["save"],setup(h,{emit:d}){const e=h,p=d;let s=b({value:Number(e.item.value)});function l(a){let{id:n}=e.item,m=a.target.checked,w=Number(m)+"";p("save",{id:n,value:w})}return E(()=>e.item.value,a=>{i.extend(s,{value:Number(a)})}),(a,n)=>(o(),u("div",L,[c("div",M,[c("label",P,k(e.item.name),1),c("input",{class:"form-check-input",type:"checkbox",checked:t(s).value,onChange:l},null,40,R)])]))}},W={class:"jg-sw-form"},Y={class:"jg-form-check form-switch"},G={class:"form-check-label"},J=["value"],K={__name:"select",props:["item"],emits:["save"],setup(h,{emit:d}){const e=h,p=d;let s=b({value:e.item.options[0].key});function l(){let{id:a}=e.item,{value:n}=s;p("save",{id:a,value:n})}return E(()=>e.item.value,a=>{i.extend(s,{value:a})}),(a,n)=>(o(),u("div",W,[c("div",Y,[c("label",G,k(e.item.name),1),N(c("select",{class:"form-select","onUpdate:modelValue":n[0]||(n[0]=m=>t(s).value=m)},[(o(!0),u(g,null,y(e.item.options,m=>(o(),u("option",{value:m.key},k(m.value),9,J))),256))],512),[[B,t(s).value]]),c("div",{class:"jg-button",onClick:l},"保存")])]))}},O={class:"md-4"},Q={class:"nav nav-underline-border",role:"tablist"},X=["onClick"],Z={class:"tab-content rounded-bottom"},ee={class:"row jg-sw-row"},te={class:"col-sm-4 jg-sw-col"},ae={__name:"switch",setup(h){let d=U(),{currentRoute:{_rawValue:{params:{app_key:e}}}}=d;const p=F();let s=[{type:"app",name:"应用相关",list:[{id:"token_effective_minute",type:"input",name:"Token 有效时长（小时）",value:0}]},{type:"message",name:"消息相关",list:[{id:"is_hide_msg_before_join_group",type:"switch",name:"入群后获取之前的历史消息",value:0},{id:"his_msg_save_day",type:"select",name:"历史消息存储时长 (天)",value:"7",options:[{key:"7",value:"7 天"},{key:"360",value:"1 年"}]}]}],l=b({settings:s,current:s[0].type});function a(v){i.extend(l,{current:v.type})}function n(v){S.updateSetting({...v,app_key:e}).then(()=>{p.proxy.$toast({icon:"success",text:"保存成功"})})}function m(v,f){i.forEach(v,_=>{i.forEach(_.list,r=>{f(r)})})}function w(){let v=[];m(s,f=>{v.push(f.id)}),S.getSetting({app_key:e,config_keys:v}).then(({data:f})=>{let{configs:_}=f;m(l.settings,r=>{i.forEach(_,(T,q)=>{i.isEqual(r.id,q)&&(r.value=T)})})})}return w(),(v,f)=>(o(),u("div",O,[c("ul",Q,[(o(!0),u(g,null,y(t(l).settings,_=>(o(),u("li",{class:"nav-item sw-nav-item",onClick:r=>a(_)},[c("a",{class:C(["nav-link jgicon jgicon-free",{active:t(i).isEqual(t(l).current,_.type)}])},k(_.name),3)],8,X))),256))]),c("div",Z,[(o(!0),u(g,null,y(t(l).settings,_=>(o(),u("div",{class:C(["tab-pane p-3",{active:t(i).isEqual(t(l).current,_.type)}])},[c("div",ee,[(o(!0),u(g,null,y(_.list,r=>(o(),u("div",te,[t(i).isEqual(r.type,t($).INPUT)?(o(),x(D,{key:0,item:r,onSave:n},null,8,["item"])):j("",!0),t(i).isEqual(r.type,t($).SELECT)?(o(),x(K,{key:1,item:r,onSave:n},null,8,["item"])):j("",!0),t(i).isEqual(r.type,t($).SWITCH)?(o(),x(H,{key:2,item:r,onSave:n},null,8,["item"])):j("",!0)]))),256))])],2))),256))])]))}};export{ae as default};
