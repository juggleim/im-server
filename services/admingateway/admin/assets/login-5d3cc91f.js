import{r as y,c,q as w,a as t,j as u,v,u as e,t as l,k as E,$ as M,i as k,d as i,E as x,aa as m,S,l as I,m as T,ab as U,o as d,g as C}from"./index-a6509667.js";import{U as V}from"./user-cca7f5d3.js";const $={class:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center jg-login-body"},h={class:"container"},P={class:"row justify-content-center"},q={class:"col-lg-6"},B={class:"card-group d-block d-md-flex row"},N={class:"card col-md-7 p-4 mb-0 jg-login-card"},R={class:"card-body"},D={class:"login-input-group mb-3"},K={key:0,class:"invalid-feedback feedback"},L={class:"login-input-group mb-3"},O={key:0,class:"invalid-feedback feedback"},A={class:"login-input-group mb-3"},J={class:"invalid-feedback feedback login-feedback"},z={__name:"login",setup(Y){let f=C();const b=k();let s=y({account:"",password:"",pwdErrorMsg:"",accountErrorMsg:"",loginErrorMsg:"",isSending:!1});function g(){let{account:r,password:o}=s;if(i.isEmpty(r))return s.accountErrorMsg="账号不能为空";if(i.isEmpty(o))return s.pwdErrorMsg="密码不能为空";V.login({account:r,password:o}).then(({code:n,data:a})=>{i.isEqual(n,x.SUCCESS_0.code)&&(a.type=i.isEqual(a.env,"private")?m.PRIVATE:m.PUBLIC,S.set(I.USER_TOKEN,a),f.proxy.$toast({text:"登录成功",icon:"success"}),T.goHomePage(b));let _=U.find(j=>i.isEqual(j.code,n))||{};s.loginErrorMsg=_.msg||"登录失败 "+n})}function p(r){let o={pwd:()=>{s.pwdErrorMsg=""},account:()=>{s.accountErrorMsg=""}};s.loginErrorMsg="",o[r]()}return(r,o)=>(d(),c("div",$,[o[7]||(o[7]=w('<div class="jg-login-banner"><div class="jg-login-sologin"><div class="title">JuggleIM, 我专属的即时通讯组件</div><div class="grap"><p class="content jgicon jgicon-book">集成简单高效</p><p class="content jgicon jgicon-product">产品轻量易用</p></div><div class="grap"><p class="content jgicon jgicon-safe">服务可靠稳定</p><p class="content jgicon jgicon-rokcet">功能灵活多变</p></div><div class="grap"><p class="content jgicon jgicon-reliable">技术服务贴身</p><p class="content jgicon jgicon-money">价格优惠实在</p></div></div></div>',1)),t("div",h,[t("div",P,[t("div",q,[t("div",B,[t("div",N,[t("div",R,[o[6]||(o[6]=t("h1",{class:"jg-login-title"},"登录 JuggleIM 后台",-1)),t("div",D,[u(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e(s).account=n),placeholder:"账号",onInput:o[1]||(o[1]=n=>p("account"))},null,544),[[v,e(s).account]]),e(s).accountErrorMsg?(d(),c("div",K,l(e(s).accountErrorMsg),1)):E("",!0)]),t("div",L,[u(t("input",{class:"form-control",type:"password","onUpdate:modelValue":o[2]||(o[2]=n=>e(s).password=n),placeholder:"密码",onInput:o[3]||(o[3]=n=>p("pwd")),onKeydown:o[4]||(o[4]=M(n=>g(),["enter"]))},null,544),[[v,e(s).password]]),e(s).pwdErrorMsg?(d(),c("div",O,l(e(s).pwdErrorMsg),1)):E("",!0)]),t("div",A,[t("button",{class:"btn btn-primary jg-login-button",type:"button",onClick:o[5]||(o[5]=n=>g())},"登录")]),t("div",J,l(e(s).loginErrorMsg),1)])])])])])])]))}};export{z as default};
