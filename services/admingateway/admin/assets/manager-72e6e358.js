import{_ as w}from"./dialog-bc66d1c4.js";import{r as S,d as n,c as a,a as t,F as m,b as h,u as c,h as j,w as E,A as f,E as C,o as i,t as r,g as k}from"./index-0818f5f9.js";const x={class:"mb-4"},y={class:"header jg-header"},$=t("div",{class:"jg-title"},"应用列表",-1),A={class:"table jg-table"},B=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"应用名称"),t("th",{scope:"col"},"授权个数"),t("th",{scope:"col"},"到期时间"),t("th",{scope:"col"},"创建时间"),t("th",{scope:"col"},"操作")])],-1),T={class:"row g-2 jg-row"},F=t("div",{class:"form-floating"},[t("input",{class:"form-control",placeholder:"应用名称"}),t("label",null,"应用名称")],-1),L={class:"form-floating"},N={class:"form-select"},V=["value"],q=t("label",null,"授权个数",-1),U={__name:"manager",setup(D){let g=k(),u={name:"",count:0},o=S({apps:[],isShowEdit:!1,licenses:[{value:1,label:"0-200"},{value:2,label:"200-500"},{value:3,label:"500-1000"}],app:n.clone(u)});function d(l){o.isShowEdit=l}function b(){let l={name:"",count:""};f.create(l).then(({code:s,msg:e})=>{let p="error",_=e;n.isEqual(s,C.SUCCESS_0.code)&&(p="success",_="创建成功",o.apps.push(l),o.app=n.clone(u)),g.proxy.$toast({icon:p,text:_,duration:4e3})})}function v(){f.getList().then(({data:{items:l}})=>{let s=l.map(e=>(e.created_time=n.formatTime(e.created_time),e.ended_time=n.formatTime(e.ended_time),e.user_count=n.numberWithCommas(e.user_count),e));o.apps=s})}return v(),(l,s)=>(i(),a("div",x,[t("div",y,[$,t("div",{class:"jgicon jgicon-add jg-button jg-button-bg",onClick:s[0]||(s[0]=e=>d(!0)),onSave:s[1]||(s[1]=e=>b())},"创建应用",32)]),t("table",A,[B,t("tbody",null,[(i(!0),a(m,null,h(c(o).apps,e=>(i(),a("tr",null,[t("td",null,r(e.app_name),1),t("td",null,r(e.user_count),1),t("td",null,r(e.ended_time),1),t("td",null,r(e.created_time),1),t("td",null,[t("a",{class:"btn-link jg-btn-link",type:"button",onClick:s[2]||(s[2]=()=>{})},"查看")])]))),256))])]),j(w,{show:c(o).isShowEdit,title:"创建应用",onHide:s[3]||(s[3]=e=>d(!1))},{default:E(()=>[t("div",T,[F,t("div",L,[t("select",N,[(i(!0),a(m,null,h(c(o).licenses,e=>(i(),a("option",{value:e.value},r(e.label),9,V))),256))]),q])])]),_:1},8,["show"])]))}};export{U as default};
