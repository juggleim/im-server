import{S as C,a as k,r as P,n as N,c as b,b as s,t as i,u as v,F as R,d as L,A as S,e as a,m as f,f as B,g as $,E as K,o as u,h as V,i as H,j as I}from"./index-668b837b.js";const O={class:"card-body db-layout"},U={class:"db-contanier"},q={class:"db-apps",ref:"dashApps"},D={class:"db-app"},F={class:"db-app-header bd-bottom"},W={class:"db-app-name"},j={class:"db-app"},G={class:"db-app-header bd-bottom"},M={class:"db-app-name"},X={class:"db-app-body"},Y={class:"row db-row"},z={class:"col-md-6 db-right"},J={class:"row db-row"},Q=["onClick"],Z={class:"row db-row"},ss={class:"col-md-6 db-right"},ts={class:"row db-row"},os={class:"col-md-6 db-right"},es={class:"row db-row"},ds={class:"col-md-6 db-right"},is={class:"row db-row"},as={class:"col-md-6 db-right"},rs={class:"row db-row"},ns={class:"col-md-6 db-right"},cs={class:"db-app-footer bd-top"},ls=["onClick"],bs={__name:"dashboard",setup(_s){const n=V();let g=C.get(k.USER_TOKEN),c=P({apps:[]});function E(d){console.log(d)}let l={offset:"",has_more:!0};function m(d,t=a.noop){if(!l.has_more)return t(),n.proxy.$toast({icon:"warn",text:"没有更多啦"});S.getList({offset:l.offset}).then(({code:o,data:r})=>{let p=H.USER_TOKEN_EXPIRE;if(a.isEqual(o,p.code))return n.proxy.$toast({icon:"error",text:p.msg}),f.goLoginPage();let{items:A,offset:T,has_more:x}=r;a.extend(l,{offset:T,has_more:x});let h=A.map(e=>(e.created_time=a.formatTime(e.created_time),e.ended_time=e.ended_time==-1?"永久有效":a.formatTime(e.ended_time),e.cur_user_count=a.numberWithCommas(e.cur_user_count),e.max_user_count=a.numberWithCommas(e.max_user_count),e.kind=a.isEqual(e.app_type,B.PRIVATE)?"私有云":"公有云",e));d?c.apps=h:a.forEach(h,e=>{c.apps.push(e)}),t()})}m(!0);function w(d){I.setCurrent(d),f.goBasePage(d)}function y(){$.$emit(K.CREATE_APP)}let _=!0;return N(()=>{let{dashApps:d}=n.refs;d.addEventListener("scroll",()=>{let t=d.scrollTop,o=d.scrollHeight,r=d.getBoundingClientRect().height;o-t-r<50&&_&&(_=!1,m(!1,()=>{_=!0}))})}),(d,t)=>(u(),b("div",O,[s("div",U,[t[7]||(t[7]=s("div",{class:"db-header nav-underline-border"},[s("strong",{class:"db-header-title"},"我的应用")],-1)),s("div",q,[s("div",D,[s("div",F,[s("div",W,i(v(g).is_commercial?"导入应用":"创建应用"),1)]),s("div",{class:"db-app-body db-create-body"},[s("div",{class:"db-app-create cicon cicon-add",onClick:y})])]),(u(!0),b(R,null,L(v(c).apps,o=>(u(),b("div",j,[s("div",G,[s("div",M,i(o.name),1)]),s("div",X,[s("div",Y,[t[0]||(t[0]=s("div",{class:"col-md-6 db-left"},"应用名称",-1)),s("div",z,i(o.app_name),1)]),s("div",J,[t[1]||(t[1]=s("div",{class:"col-md-6 db-left"},"App-Key",-1)),s("div",{class:"col-md-6 db-right cicon cicon-copy",onClick:r=>E(o.app_key)},i(o.app_key),9,Q)]),s("div",Z,[t[2]||(t[2]=s("div",{class:"col-md-6 db-left"},"创建时间",-1)),s("div",ss,i(o.created_time),1)]),s("div",ts,[t[3]||(t[3]=s("div",{class:"col-md-6 db-left"},"已注册用户",-1)),s("div",os,i(o.cur_user_count),1)]),s("div",es,[t[4]||(t[4]=s("div",{class:"col-md-6 db-left"},"授权用户总数",-1)),s("div",ds,i(o.max_user_count==-1?"无限制":o.max_user_count),1)]),s("div",is,[t[5]||(t[5]=s("div",{class:"col-md-6 db-left"},"部署方式",-1)),s("div",as,i(o.kind),1)]),s("div",rs,[t[6]||(t[6]=s("div",{class:"col-md-6 db-left"},"到期时间",-1)),s("div",ns,i(o.ended_time),1)])]),s("div",cs,[s("a",{class:"btn",onClick:r=>w(o)},"查看明细",8,ls)])]))),256))],512)])]))}};export{bs as default};
