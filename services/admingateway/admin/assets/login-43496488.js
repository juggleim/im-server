import{r as y,c as a,a as t,j as u,v,u as e,t as l,k as E,T as w,q as M,i as k,d as i,E as h,V as m,S as x,l as S,m as I,W as T,o as d,g as U}from"./index-0818f5f9.js";import{U as V}from"./user-99a27971.js";const C={class:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center jg-login-body"},P=M('<div class="jg-login-banner"><div class="jg-login-sologin"><div class="title">JuggleIM, 我专属的即时通讯组件</div><div class="grap"><p class="content jgicon jgicon-book">集成简单高效</p><p class="content jgicon jgicon-product">产品轻量易用</p></div><div class="grap"><p class="content jgicon jgicon-safe">服务可靠稳定</p><p class="content jgicon jgicon-rokcet">功能灵活多变</p></div><div class="grap"><p class="content jgicon jgicon-reliable">技术服务贴身</p><p class="content jgicon jgicon-money">价格优惠实在</p></div></div></div>',1),$={class:"container"},q={class:"row justify-content-center"},B={class:"col-lg-6"},N={class:"card-group d-block d-md-flex row"},R={class:"card col-md-7 p-4 mb-0 jg-login-card"},D={class:"card-body"},K=t("h1",{class:"jg-login-title"},"登录 JuggleIM 后台",-1),L={class:"login-input-group mb-3"},O={key:0,class:"invalid-feedback feedback"},A={class:"login-input-group mb-3"},J={key:0,class:"invalid-feedback feedback"},Y={class:"login-input-group mb-3"},G={class:"invalid-feedback feedback login-feedback"},F={__name:"login",setup(H){let _=U();const f=k();let s=y({account:"",password:"",pwdErrorMsg:"",accountErrorMsg:"",loginErrorMsg:"",isSending:!1});function g(){let{account:r,password:o}=s;if(i.isEmpty(r))return s.accountErrorMsg="账号不能为空";if(i.isEmpty(o))return s.pwdErrorMsg="密码不能为空";V.login({account:r,password:o}).then(({code:n,data:c})=>{i.isEqual(n,h.SUCCESS_0.code)&&(c.type=i.isEqual(c.env,"private")?m.PRIVATE:m.PUBLIC,x.set(S.USER_TOKEN,c),_.proxy.$toast({text:"登录成功",icon:"success"}),I.goHomePage(f));let b=T.find(j=>i.isEqual(j.code,n))||{};s.loginErrorMsg=b.msg||"登录失败 "+n})}function p(r){let o={pwd:()=>{s.pwdErrorMsg=""},account:()=>{s.accountErrorMsg=""}};s.loginErrorMsg="",o[r]()}return(r,o)=>(d(),a("div",C,[P,t("div",$,[t("div",q,[t("div",B,[t("div",N,[t("div",R,[t("div",D,[K,t("div",L,[u(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e(s).account=n),placeholder:"账号",onInput:o[1]||(o[1]=n=>p("account"))},null,544),[[v,e(s).account]]),e(s).accountErrorMsg?(d(),a("div",O,l(e(s).accountErrorMsg),1)):E("",!0)]),t("div",A,[u(t("input",{class:"form-control",type:"password","onUpdate:modelValue":o[2]||(o[2]=n=>e(s).password=n),placeholder:"密码",onInput:o[3]||(o[3]=n=>p("pwd")),onKeydown:o[4]||(o[4]=w(n=>g(),["enter"]))},null,544),[[v,e(s).password]]),e(s).pwdErrorMsg?(d(),a("div",J,l(e(s).pwdErrorMsg),1)):E("",!0)]),t("div",Y,[t("button",{class:"btn btn-primary jg-login-button",type:"button",onClick:o[5]||(o[5]=n=>g())},"登录")]),t("div",G,l(e(s).loginErrorMsg),1)])])])])])])]))}};export{F as default};
