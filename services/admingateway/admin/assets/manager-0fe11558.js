import{_ as w}from"./dialog-70b70e8a.js";import{r as S,d as n,c as a,a as t,F as f,b as _,u,h as j,w as E,A as g,E as C,o as r,t as i,g as k}from"./index-a6509667.js";const x={class:"mb-4"},y={class:"header jg-header"},$={class:"table jg-table"},A={class:"row g-2 jg-row"},B={class:"form-floating"},T={class:"form-select"},F=["value"],q={__name:"manager",setup(L){let b=k(),d={name:"",count:0},s=S({apps:[],isShowEdit:!1,licenses:[{value:1,label:"0-200"},{value:2,label:"200-500"},{value:3,label:"500-1000"}],app:n.clone(d)});function c(o){s.isShowEdit=o}function v(){let o={name:"",count:""};g.create(o).then(({code:e,msg:l})=>{let p="error",m=l;n.isEqual(e,C.SUCCESS_0.code)&&(p="success",m="创建成功",s.apps.push(o),s.app=n.clone(d)),b.proxy.$toast({icon:p,text:m,duration:4e3})})}function h(){g.getList().then(({data:{items:o}})=>{let e=o.map(l=>(l.created_time=n.formatTime(l.created_time),l.ended_time=n.formatTime(l.ended_time),l.user_count=n.numberWithCommas(l.user_count),l));s.apps=e})}return h(),(o,e)=>(r(),a("div",x,[t("div",y,[e[4]||(e[4]=t("div",{class:"jg-title"},"应用列表",-1)),t("div",{class:"jgicon jgicon-add jg-button jg-button-bg",onClick:e[0]||(e[0]=l=>c(!0)),onSave:e[1]||(e[1]=l=>v())},"创建应用",32)]),t("table",$,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"应用名称"),t("th",{scope:"col"},"授权个数"),t("th",{scope:"col"},"到期时间"),t("th",{scope:"col"},"创建时间"),t("th",{scope:"col"},"操作")])],-1)),t("tbody",null,[(r(!0),a(f,null,_(u(s).apps,l=>(r(),a("tr",null,[t("td",null,i(l.app_name),1),t("td",null,i(l.user_count),1),t("td",null,i(l.ended_time),1),t("td",null,i(l.created_time),1),t("td",null,[t("a",{class:"btn-link jg-btn-link",type:"button",onClick:e[2]||(e[2]=()=>{})},"查看")])]))),256))])]),j(w,{show:u(s).isShowEdit,title:"创建应用",onHide:e[3]||(e[3]=l=>c(!1))},{default:E(()=>[t("div",A,[e[7]||(e[7]=t("div",{class:"form-floating"},[t("input",{class:"form-control",placeholder:"应用名称"}),t("label",null,"应用名称")],-1)),t("div",B,[t("select",T,[(r(!0),a(f,null,_(u(s).licenses,l=>(r(),a("option",{value:l.value},i(l.label),9,F))),256))]),e[6]||(e[6]=t("label",null,"授权个数",-1))])])]),_:1},8,["show"])]))}};export{q as default};
