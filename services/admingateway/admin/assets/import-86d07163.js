import{r as w,d as r,c as i,a as t,F as C,b as M,u as a,h as S,w as x,i as $,A as g,E as K,o as d,t as l,j as h,v,k as E,g as V,f as A}from"./index-0818f5f9.js";import{_ as T}from"./dialog-bc66d1c4.js";const B={class:"mb-4"},I={class:"header jg-header"},L=t("div",{class:"jg-title"},"应用列表",-1),D={class:"table jg-table"},N=t("thead",null,[t("tr",null,[t("th",null,"应用名称"),t("th",{class:"jd-td-c"},"已使用授权数量"),t("th",{class:"jd-td-c"},"未使用授权数量"),t("th",{class:"jd-td-c"},"到期时间"),t("th",{class:"jd-td-c"},"创建时间"),t("th",null,"操作")])],-1),U={class:"jd-td-c"},F={class:"jd-td-c"},W={class:"jd-td-c"},q={class:"jd-td-c"},H=["onClick"],R={class:"row g-2 jg-row"},z={class:"form-floating"},G=t("label",null,"应用名称",-1),J={key:0,class:"invalid-feedback feedback"},O={class:"form-floating"},P=t("label",null,"License Key",-1),Q={key:0,class:"invalid-feedback feedback"},ee={__name:"import",setup(X){let b=V(),j=$(),u={name:"",licenseKey:""},n=w({apps:[],isShowEdit:!1,nameErrorMsg:"",licenseErrorMsg:"",app:r.clone(u)});function p(o){n.isShowEdit=o}function _(){let{app:o}=n;if(r.isEmpty(o.name))return n.nameErrorMsg="名称不能为空";if(r.isEmpty(o.licenseKey))return n.licenseErrorMsg="授权不能为空";g.create(o).then(({code:s,msg:e})=>{let c="error",f=`导入失败 ${e}`;r.isEqual(s,K.SUCCESS_0.code)&&(c="success",f="创建成功",n.apps.push(o),n.app=r.clone(u)),b.proxy.$toast({icon:c,text:f,duration:4e3})})}function y(){g.getList().then(({data:{items:o}})=>{let s=o.map(e=>(e.created_time=r.formatTime(e.created_time),e.ended_time=r.formatTime(e.ended_time),e.cur_user_count=r.numberWithCommas(e.cur_user_count),e.max_user_count=r.numberWithCommas(e.max_user_count),e));n.apps=s})}y();function m(){n.nameErrorMsg="",n.licenseErrorMsg=""}function k(o){A.setCurrent(o),j.push({name:"ArguBase",params:{app_key:o.app_key}})}return(o,s)=>(d(),i("div",B,[t("div",I,[L,t("div",{class:"jgicon jgicon-add jg-button jg-button-bg",onClick:s[0]||(s[0]=e=>p(!0)),onSave:s[1]||(s[1]=e=>_())},"导入应用",32)]),t("table",D,[N,t("tbody",null,[(d(!0),i(C,null,M(a(n).apps,e=>(d(),i("tr",null,[t("td",null,l(e.app_name),1),t("td",U,l(e.cur_user_count),1),t("td",F,l(e.max_user_count),1),t("td",W,l(e.ended_time),1),t("td",q,l(e.created_time),1),t("td",null,[t("a",{class:"btn-link jg-btn-link",type:"button",onClick:c=>k(e)},"查看",8,H)])]))),256))])]),S(T,{show:a(n).isShowEdit,title:"导入应用",onHide:s[6]||(s[6]=e=>p(!1)),onSave:s[7]||(s[7]=e=>_())},{default:x(()=>[t("div",R,[t("div",z,[h(t("input",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=e=>a(n).app.name=e),placeholder:"应用名称",onInput:s[3]||(s[3]=e=>m())},null,544),[[v,a(n).app.name]]),G,a(n).nameErrorMsg?(d(),i("div",J,l(a(n).nameErrorMsg),1)):E("",!0)]),t("div",O,[h(t("input",{class:"form-control","onUpdate:modelValue":s[4]||(s[4]=e=>a(n).app.licenseKey=e),placeholder:"License Key",onInput:s[5]||(s[5]=e=>m())},null,544),[[v,a(n).app.licenseKey]]),P,a(n).licenseErrorMsg?(d(),i("div",Q,l(a(n).licenseErrorMsg),1)):E("",!0)])])]),_:1},8,["show"])]))}};export{ee as default};
